(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{332:function(t,e,a){"use strict";a.r(e);var r=a(33),l=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_0x2-flutter-混编及调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0x2-flutter-混编及调试"}},[t._v("#")]),t._v(" 0x2: Flutter 混编及调试")]),t._v(" "),a("h2",{attrs:{id:"flutter-module工程创建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flutter-module工程创建"}},[t._v("#")]),t._v(" flutter module工程创建")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("mkdir flutter\nflutter create -t module flutter_vote_module\n")])])]),a("h2",{attrs:{id:"module-工程配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-工程配置"}},[t._v("#")]),t._v(" module 工程配置")]),t._v(" "),a("p",[t._v("android strudio打开创建的工程，默认有两个隐藏文件.android,.ios")]),t._v(" "),a("h4",{attrs:{id:"android-配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#android-配置"}},[t._v("#")]),t._v(" android 配置")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("配置pubspec.yaml 配置androidPackage")])]),t._v(" "),a("li",[a("p",[t._v("构建outputs产物。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Flutter build apk --debug\nFlutter build apk --release\n")])])])]),t._v(" "),a("li",[a("p",[t._v("将构建产物独立制作成库")])]),t._v(" "),a("li",[a("p",[t._v("配置到native工程，并执行原生调用flutter")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    View FlutterView = Flutter.createView(this, getLifecycle(), "defaultRoute"); //传入路由标识符\n    setContentView(FlutterView);//用FlutterView替代Activity的ContentView\n}\n')])])])])]),t._v(" "),a("h4",{attrs:{id:"ios配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ios配置"}},[t._v("#")]),t._v(" iOS配置")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("配置pubspec.yaml 配置iosBundleIdentifier工程。")])]),t._v(" "),a("li",[a("p",[t._v("运行.iOS runner工程。调整签名证书为iosBundleIdentifier 配置对应的bundle。并且保证运行成功")])]),t._v(" "),a("li",[a("p",[t._v("运行android studio工程，生成构建产物")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Flutter build ios --debug\nFlutter build ios --release\n")])])])]),t._v(" "),a("li",[a("p",[t._v("module工程下创建pod spec. 然后"),a("code",[t._v("pod lib lint")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Pod::Spec.new do |s|\n  s.name             = 'flutter_vote_module'\n  s.version          = '0.1.0'\n  s.summary          = 'XXXXXXX'\n  s.description      = <<-DESC\nTODO: Add long description of the pod here.\n                       DESC\n  s.homepage         = 'https://xxxx/flutterplugin/flutterengine.git'\n  s.license          = { :type => 'MIT', :file => 'LICENSE' }\n  s.author           = { 'chenhang' => 'hangisnice@gmail.com' }\n  s.source       = { :git => \"\", :tag => \"#{s.version}\" }\n  s.ios.deployment_target = '8.0'\n  s.ios.vendored_frameworks = '**/*.framework'\nend\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Native 工程集成 module工程")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("方案1： pod 源码")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("//podfile\n//定义路径\nflutter_application_path = '../../flutter_vote_module'\nload File.join(flutter_application_path, '.ios', 'Flutter', 'podhelper.rb')\n//target工程执行\ninstall_all_flutter_pods(flutter_application_path)\n")])])])]),t._v(" "),a("li",[a("p",[t._v("方案2: pod构建产物")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("pod 'flutter_vote_module','1.0.6-dev'\n")])])])])])]),t._v(" "),a("li",[a("p",[t._v("引入视图")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('//创建engin\nFlutterDartProject * dart = [[FlutterDartProject alloc] init];\n_engine = [[FlutterEngine alloc] initWithName:@"ios.dart.flutter"\n                                                     project:dart];\n[_engine runWithEntrypoint:nil];\n\n//show视图\nFlutterViewController *vc = [[FlutterViewController alloc]initWithEngine:engine nibName:nil bundle:nil];\nvc.modalPresentationStyle = UIModalPresentationFullScreen;\n[self.liveController presentViewController:vc animated:YES completion:nil];\n')])])]),a("p",[t._v("正常present和push方式推荐使用flutterBoost")])])]),t._v(" "),a("h2",{attrs:{id:"调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调试"}},[t._v("#")]),t._v(" 调试")]),t._v(" "),a("h4",{attrs:{id:"flutter-的产物分为两种模式。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flutter-的产物分为两种模式。"}},[t._v("#")]),t._v(" Flutter 的产物分为两种模式。")]),t._v(" "),a("ul",[a("li",[t._v("一个是 Debug 模式，采用 JIT（Just In Time）的方式，好处是可以支持热更新，方便调试,，但是性能比较慢。")]),t._v(" "),a("li",[t._v("另一种是 AOT（Ahead Of Time）release 模式，好处是性能比较好。")])]),t._v(" "),a("h4",{attrs:{id:"debug模式下进行调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#debug模式下进行调试"}},[t._v("#")]),t._v(" debug模式下进行调试")]),t._v(" "),a("ul",[a("li",[t._v("native 原生工程使用pod 源码的方式集成flutter工程后，运行native app，切到flutter页面")]),t._v(" "),a("li",[t._v("flutter 工程下terminal执行一下命令：")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('#查找可用device\nflutter devices\n\t\tiPhone • 00008020-000504A63A45002E • ios • iOS 13.3\n\t\t\n#执行attach\nflutter attach -d  00008020-000504A63A45002E \n\t\tSyncing files to device iPhone...  #表示连接成功\n\t\t🔥  To hot reload changes while running, press "r". To hot restart (and rebuild state), press "R".\n')])])]),a("ul",[a("li",[t._v("此时我们在flutter 工程上对flutter页面修改后，再执行 r,即可查看到相关改变")])]),t._v(" "),a("p",[t._v("如果看不到上面的提示，可以检查一下：")]),t._v(" "),a("ul",[a("li",[t._v("是否同一个wifi")]),t._v(" "),a("li",[t._v("关闭热点")]),t._v(" "),a("li",[t._v("权限弹窗")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/flutter/flutter/issues/46705",target:"_blank",rel:"noopener noreferrer"}},[t._v("其他"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"error"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#error"}},[t._v("#")]),t._v(" Error")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("错误1")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("//屏幕空白\nflutter devices \nflutter run --enable-software-rendering -d  设备号f\nflutter run\n")])])])])])])}),[],!1,null,null,null);e.default=l.exports}}]);