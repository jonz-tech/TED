<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>0x0:Flutter环境搭建 | jonz-tech</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="jonz-tech的博客">
    <link rel="preload" href="/TED/assets/css/0.styles.8772efb5.css" as="style"><link rel="preload" href="/TED/assets/js/app.63f257b9.js" as="script"><link rel="preload" href="/TED/assets/js/2.a7720a4c.js" as="script"><link rel="preload" href="/TED/assets/js/9.fe618919.js" as="script"><link rel="prefetch" href="/TED/assets/js/10.6389405c.js"><link rel="prefetch" href="/TED/assets/js/11.55c70faf.js"><link rel="prefetch" href="/TED/assets/js/12.001cf7a8.js"><link rel="prefetch" href="/TED/assets/js/13.70787f3e.js"><link rel="prefetch" href="/TED/assets/js/14.ce264abf.js"><link rel="prefetch" href="/TED/assets/js/15.e95ddada.js"><link rel="prefetch" href="/TED/assets/js/16.d5f94a02.js"><link rel="prefetch" href="/TED/assets/js/17.e68cbc61.js"><link rel="prefetch" href="/TED/assets/js/3.49e3dd41.js"><link rel="prefetch" href="/TED/assets/js/4.48ddd991.js"><link rel="prefetch" href="/TED/assets/js/5.0cd82e94.js"><link rel="prefetch" href="/TED/assets/js/6.8162f014.js"><link rel="prefetch" href="/TED/assets/js/7.ce305aed.js"><link rel="prefetch" href="/TED/assets/js/8.52dc745a.js">
    <link rel="stylesheet" href="/TED/assets/css/0.styles.8772efb5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TED/" class="home-link router-link-active"><!----> <span class="site-name">jonz-tech</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/TED/home/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/TED/flutter/" class="nav-link router-link-active">
  flutter
</a></div><div class="nav-item"><a href="/TED/android/" class="nav-link">
  android
</a></div><div class="nav-item"><a href="/TED/ios/" class="nav-link">
  ios
</a></div><div class="nav-item"><a href="/TED/ted/" class="nav-link">
  ted
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/TED/home/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/TED/flutter/" class="nav-link router-link-active">
  flutter
</a></div><div class="nav-item"><a href="/TED/android/" class="nav-link">
  android
</a></div><div class="nav-item"><a href="/TED/ios/" class="nav-link">
  ios
</a></div><div class="nav-item"><a href="/TED/ted/" class="nav-link">
  ted
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/TED/flutter/day0.html" class="active sidebar-link">0x0:Flutter环境搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TED/flutter/day0.html#搭建android" class="sidebar-link">搭建android</a></li><li class="sidebar-sub-header"><a href="/TED/flutter/day0.html#搭建ios" class="sidebar-link">搭建iOS</a></li><li class="sidebar-sub-header"><a href="/TED/flutter/day0.html#flutter环境" class="sidebar-link">flutter环境</a></li><li class="sidebar-sub-header"><a href="/TED/flutter/day0.html#工程配置运行" class="sidebar-link">工程配置运行</a></li><li class="sidebar-sub-header"><a href="/TED/flutter/day0.html#常见问题" class="sidebar-link">常见问题</a></li></ul></li><li><a href="/TED/flutter/day1.html" class="sidebar-link">0x1: 使用内部修正版Engine</a></li><li><a href="/TED/flutter/day2.html" class="sidebar-link">0x2: Flutter 混编及调试</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_0x0-flutter环境搭建"><a href="#_0x0-flutter环境搭建" class="header-anchor">#</a> 0x0:Flutter环境搭建</h1> <h2 id="搭建android"><a href="#搭建android" class="header-anchor">#</a> 搭建android</h2> <ul><li>环境要求 java 8<a href="https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html" target="_blank" rel="noopener noreferrer">下载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Android studio<a href="https://developer.android.com/studio/index.html?hl=zh-cn" target="_blank" rel="noopener noreferrer">下载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>按照要求验证java8及android studio</li> <li>安装一台模拟器。AVD Manager 选择Create Virtual Device，Nexus 6P 模拟器</li></ul> <h2 id="搭建ios"><a href="#搭建ios" class="header-anchor">#</a> 搭建iOS</h2> <ul><li>apple store 搜索xcode 进行安装</li> <li>安装模拟器及command-line</li> <li>打开模拟器 open -a Simulator</li></ul> <h2 id="flutter环境"><a href="#flutter环境" class="header-anchor">#</a> flutter环境</h2> <ul><li>配置镜像</li></ul> <div class="language- extra-class"><pre class="language-text"><code>vi ~/.bash_profile
export PUB_HOSTED_URL=https://pub.flutter-io.cn  
export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn
</code></pre></div><ul><li>下载<a href="https://flutter.dev/docs/development/tools/sdk/releases?tab=macos" target="_blank" rel="noopener noreferrer">flutter稳定版本<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language- extra-class"><pre class="language-text"><code>vi ~/.bash_profile
#加入下面配置。 注意路径为你解压稳定版的bin目录
export PATH=~/Documents/flutter/bin:$PATH
</code></pre></div><ul><li>验证环境</li></ul> <div class="language- extra-class"><pre class="language-text"><code>//终端输入 flutter emulators 找到可运行设备
//返回
Nexus_6P_API_R      • Nexus 6P API R • Google • android
apple_ios_simulator • iOS Simulator  • Apple  • ios

</code></pre></div><ul><li>运行</li></ul> <div class="language- extra-class"><pre class="language-text"><code>//cd到稳定版目录下的example目录下的hello_world工程
flutter emulators --launch Nexus_6P_API_R
flutter run 
//若有多台链接设备，则运行 flutter run -d device_id
</code></pre></div><h2 id="工程配置运行"><a href="#工程配置运行" class="header-anchor">#</a> 工程配置运行</h2> <ul><li><p>iOS</p> <ul><li><p>安装usbmux</p> <div class="language- extra-class"><pre class="language-text"><code>brew update
brew install --HEAD usbmuxd
brew link usbmuxd
</code></pre></div></li> <li><p>安装libimobiledevice</p> <div class="language- extra-class"><pre class="language-text"><code>brew install --HEAD libimobiledevice
</code></pre></div></li> <li><p>安装ideviceinstaller</p> <div class="language- extra-class"><pre class="language-text"><code>brew install ideviceinstaller
</code></pre></div></li> <li><p>运行xcode工程./ios/Runner.xcworkspace,修改签名账号为你手机可运行证书。暂时改为公司企业证书。</p></li> <li><p>运行Runner.xcworkspace 工程，保证你运行成功。报错的话见<a href="#%E9%94%99%E8%AF%AF4">错误4</a></p></li></ul></li> <li><p>android</p> <ul><li>安装Flutter和Dart 插件。见<a href="#%E9%94%99%E8%AF%AF2">错误2</a>。由于Flutter依赖于Dart, 装Flutter默认会带上dart.</li> <li>android Studio 打开hello_world工程。Open an existing Android Studio Project &gt; hello_world</li> <li>工具栏选择启动机器。可以选择已连接的真机或者模拟器。</li> <li>工程自带两个dart作为入口。可自行切换main.dart 和araic.dart.</li> <li>运行工程即可根据效果体验。</li></ul></li> <li><p>热修复体验</p> <ul><li><p>修改main.dart入口。</p> <div class="language- extra-class"><pre class="language-text"><code>//定义一个入口类
class MyAPP extends StatelessWidget {
  @override Widget build(BuildContext context) { 
    return const Center(child: Text('Hello World', textDirection: TextDirection.ltr)); 
  }
}
//runApp()改成入口类
void main() =&gt; runApp(new MyAPP());
</code></pre></div></li> <li><p>使用debug模式，运行模拟器。能看到工具栏闪电⚡️图标亮起即可。</p></li> <li><p>修改hello world,为&quot;你好&quot;</p></li></ul></li></ul> <h2 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h2> <h4 id="错误1"><a href="#错误1" class="header-anchor">#</a> 错误1</h4> <div class="language- extra-class"><pre class="language-text"><code> **✗** **Android license status unknown.**
 Try re-installing or updating your Android SDK Manager.
 
 ## 解决
 android IED中选择configure,sdkManager,systemSetting中选择android SDK ，选择sdk tool,安装命android sdk command-line组件
</code></pre></div><h4 id="错误2"><a href="#错误2" class="header-anchor">#</a> 错误2</h4> <div class="language- extra-class"><pre class="language-text"><code>   ✗ Flutter plugin not installed; this adds Flutter specific functionality.
    ✗ Dart plugin not installed; this adds Dart specific functionality.
## 解决
同上，配置中选中plugin，安装flutter和dart
</code></pre></div><h4 id="错误3"><a href="#错误3" class="header-anchor">#</a> 错误3</h4> <div class="language- extra-class"><pre class="language-text"><code>
Waiting for another flutter command to release the startup lock...
## 解决
flutter项目中，删除bin/cache/lockfile
</code></pre></div><h4 id="错误4"><a href="#错误4" class="header-anchor">#</a> 错误4</h4> <div class="language- extra-class"><pre class="language-text"><code>Building for iOS, but the linked and embedded framework 'App.framework' was built for iOS Simulator
### 解决
//1. 移除flutter.framework和app.framework
//2. 确认Build Phases &gt; Link Binary With Libraries和 Build Phases &gt; Embed Frameworks都没有上面两个库
// 3.  Build Phases &gt; Thin Binary 加入以下两个脚本
    /bin/sh &quot;$FLUTTER_ROOT/packages/flutter_tools/bin/xcode_backend.sh&quot; embed
    /bin/sh &quot;$FLUTTER_ROOT/packages/flutter_tools/bin/xcode_backend.sh&quot; thin
//4. Build Settings &gt; Other Linker Flags 加入$(inherited)和-framework Flutter
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/TED/flutter/day1.html">
        0x1: 使用内部修正版Engine
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TED/assets/js/app.63f257b9.js" defer></script><script src="/TED/assets/js/2.a7720a4c.js" defer></script><script src="/TED/assets/js/9.fe618919.js" defer></script>
  </body>
</html>
